<html>
<head>
<script language="javascript" type="text/javascript">
function layerPresent(layer) {
	var layerID = 'banner-layer' + layer;
	var element = document.getElementById(layerID + '-pattern')
	return element != null;
}
function hardRemoveLayer(layer){
	// removes a layer, but does no clean up (such as shunting things around) should only be used to delete the last layer
	var layerID = 'banner-layer' + layer;
	var pattern = document.getElementById(layerID + '-pattern');
	var colour =  document.getElementById(layerID + '-colour');
	var canvas =  document.getElementById(layerID);
	if(pattern != null){ pattern.parentNode.removeChild(pattern); }
	if(colour != null){ colour.parentNode.removeChild(colour); }
	if(canvas != null){ canvas.parentNode.removeChild(canvas); }
	var brake = document.getElementById('banner-options').lastChild;
	brake.parentNode.removeChild(brake);
}
function addLayer(layer){
	var newLayerId = 'banner-layer' + layer
	var newPatternSelector = document.createElement('select');
		newPatternSelector.setAttribute('id', newLayerId + '-pattern');
		newPatternSelector.setAttribute('onchange', 'updateLayer(' + layer + ')');
		newPatternSelector.innerHTML = document.getElementById('banner-layer1-pattern').innerHTML;
	var newColourSelector = document.createElement('select');
		newColourSelector.setAttribute('id', newLayerId + '-colour');
		newColourSelector.setAttribute('onchange', 'updateLayer(' + layer + ')');
		newColourSelector.innerHTML = document.getElementById('banner-layer1-colour').innerHTML;
	var newCanvasLayer = document.createElement('canvas');
		newCanvasLayer.setAttribute('id', newLayerId);
		newCanvasLayer.setAttribute('width', '100');
		newCanvasLayer.setAttribute('height', '150'); 
		newCanvasLayer.setAttribute('style', 'border:1px solid #000000; position: absolute; left: 0; top: 0; z-index: ' + (layer - 1) + ';');
	
	var options = document.getElementById('banner-options');
	options.appendChild(document.createElement('br'));
	options.appendChild(newPatternSelector);
	options.appendChild(newColourSelector);

	var bannerLayer = document.getElementById('banner-layers');
	bannerLayer.appendChild(document.createElement('br'));
	bannerLayer.appendChild(newCanvasLayer);
}
function updateLayer(layer) {
	var layerID = 'banner-layer' + layer;
	var canvas = document.getElementById(layerID);
	var ctx = canvas.getContext('2d');
	ctx.clearRect ( 0 , 0 , 100 , 150 );
	var pattern = document.getElementById(layerID + '-pattern').value;
	var colour =  document.getElementById(layerID + '-colour').value;
	var width = canvas.width;
	var height = canvas.height
	if(pattern == '') {
		if(layerPresent(layer + 1) && !layerPresent(layer + 2)){
			// I'm the penultimate layer
			var lastLayerPattern = document.getElementById('banner-layer' + (layer + 1) + '-pattern').value;
			if(lastLayerPattern == ''){
				hardRemoveLayer(layer + 1);
			}
		}
		return;
	}
	else if(pattern == 'third-top') { ctx.fillStyle = colour; ctx.fillRect(0, 0, width, height/3); }
	else if(pattern == 'third-bottom') { ctx.fillStyle = colour; ctx.fillRect(0, height - (height/3), width, height/3); }
	else if(pattern == 'third-left') { ctx.fillStyle = colour; ctx.fillRect(0, 0, width/3, height); }
	else if(pattern == 'third-right') { ctx.fillStyle = colour; ctx.fillRect(width - (width/3), 0, width/3, height); }
	else if(pattern == 'line-vertical') { ctx.fillStyle = colour; ctx.fillRect(width/3, 0, width/3, height); }
	else if(pattern == 'line-horizontal') { ctx.fillStyle = colour; ctx.fillRect(0, (height - (height/6))/2, 100, height/6); }
	else if(pattern == 'corner-tl') { ctx.fillStyle = colour; ctx.fillRect(0, 0, width/2, height/2); }
	else if(pattern == 'corner-tr') { ctx.fillStyle = colour; ctx.fillRect(width/2, 0, width/2, height/2); }
	else if(pattern == 'corner-bl') { ctx.fillStyle = colour; ctx.fillRect(0, height/2, width/2, height/2); }
	else if(pattern == 'corner-br') { ctx.fillStyle = colour; ctx.fillRect(width/2, height/2, width/2, height/2); }
	else if(pattern == 'stripes-vertical') {
		ctx.fillStyle = colour;
		var lineWidth = width/8;
		for (i = 0; i < 7; i+=2) { 
    		ctx.fillRect(lineWidth/2 + (i * lineWidth), 0, lineWidth, height);
		}
		//ctx.fillRect(lineWidth/2 + (0 * lineWidth), 0, lineWidth, height);
		//ctx.fillRect(lineWidth/2 + (2 * lineWidth), 0, lineWidth, height);
		//ctx.fillRect(lineWidth/2 + (4 * lineWidth), 0, lineWidth, height);
		//ctx.fillRect(lineWidth/2 + (6 * lineWidth), 0, lineWidth, height);
	}
	else if(pattern == 'cross-streight') { ctx.fillStyle = colour; ctx.fillRect((width - (width/5))/2, 0, width/5, height); ctx.fillRect(0, (height - (height/6)) /2, 100, height/6); }
	if(!layerPresent(layer + 1)){
		addLayer(layer + 1);
	}
}
</script>
</head>
<body>
	<p>Yeah, I know this is crude, it's a work in progress.</p>
	<p>View the source on <a href="https://github.com/thecoshman/MC-banner-designer">github</a> if you like.</p>
	<p>I am aware that a few colours do not work when you select them... not sure why. (Light Grey, Lime Green and Light Blue</p>
	<form id="banner-options">
		<select id="banner-layer1-pattern" onchange="updateLayer(1)">
			<option value="">Blank</option>
			<option value="third-top">Top Third</option>
			<option value="third-bottom">Bottom Third</option>
			<option value="third-left">Left Third</option>
			<option value="third-right">Right Third</option>
			<option value="line-vertical">Vertical Line</option>
			<option value="line-horizontal">Horizontal Line</option>
			<option value="corner-tl">Top Left Corner</option>
			<option value="corner-tr">Top Right Corner</option>
			<option value="corner-bl">Bottom Left Corner</option>
			<option value="corner-br">Bottom Right Corner</option>
			<option value="stripes-vertical">Vertical Stripes</option>
			<option value="cross-streight">Streight Lines Cross</option>
		</select><select id="banner-layer1-colour" onchange="updateLayer(1)">
			<option value"#191919">Black</option>
			<option value"#993333">Red</option>
			<option value"#667F33">Green</option>
			<option value"#664C33">Brown</option>
			<option value"#334CB2">Blue</option>
			<option value"#7F3FB2">Purple</option>
			<option value"#4C7F99">Cyan</option>
			<option value"#999999">Light Grey</option>
			<option value"#4C4C4C">Grey</option>
			<option value"#F27FA5">Pink</option>
			<option value"#7FCC19">Lime Green</option>
			<option value"#E5E533">Yellow</option>
			<option value"#6699D8">Light Blue</option>
			<option value"#B24CD8">Magenta</option>
			<option value"#D87F33">Orange</option>
			<option value"#FFFFFF">White</option>
		</select>
	</form>

	<div id="banner-layers" style="position: relative;">
 		<canvas id="banner-layer1" width="100" height="150" style="border:1px solid #000000; position: absolute; left: 0; top: 0; z-index: 0;"></canvas>
	</div>
</body>
</html>
